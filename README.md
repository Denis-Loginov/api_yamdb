# Проект «YaMDb API»
## Описание проекта
Проект **YaMDb** собирает отзывы авторизованных пользователей на различные произведения по категориям.

Добавление произведений, категорий и жанров доступно только администратору.

Пользователи оставляют к произведениям текстовые отзывы и ставят произведению оценку в диапазоне от одного до десяти; из пользовательских оценок формируется усреднённая оценка произведения — рейтинг. На одно произведение пользователю доступно оставить только один отзыв.

Проект содержит как основную Backend основу (приложение reviews), так и API для него.
Описание доступных точек доступа API и пользовательских ролей описано ниже.
## Установка

Клонировать репозиторий с GitHub.

Установить вертуальное окружение.
```
python -m venv venv
```

Активировать вертуальное окружение.
```
source venv/scripts/activate
```

Установить зависимости из requirements.txt.
```
python pip install -r requirements.txt
```

Выполнить миграции.
```
python manage.py makemigrations
python manage.py migrate
```

Запустить сервер.
```
python manage.py runserver
```
### Ключевые моменты
#### Алгоритм регистрации пользователей
1. Пользователь отправляет POST-запрос на добавление нового пользователя с параметрами `email` и `username` на эндпоинт `/api/v1/auth/signup/`.
2. **YaMDB** отправляет письмо с кодом подтверждения (`confirmation_code`) на адрес  `email`.
3. Пользователь отправляет POST-запрос с параметрами `username` и `confirmation_code` на эндпоинт `/api/v1/auth/token/`, в ответе на запрос ему приходит `token` (JWT-токен).
4. При желании пользователь отправляет PATCH-запрос на эндпоинт `/api/v1/users/me/` и заполняет поля в своём профайле (описание полей — в документации).
#### Пользовательские роли
- **Аноним** — может просматривать описания произведений, читать отзывы и комментарии.
- **Аутентифицированный пользователь** (`user`) — может, как и **Аноним**, читать всё, дополнительно он может публиковать отзывы и ставить оценку произведениям (фильмам/книгам/песенкам), может комментировать чужие отзывы; может редактировать и удалять **свои** отзывы и комментарии. Эта роль присваивается по умолчанию каждому новому пользователю.
- **Модератор** (`moderator`) — те же права, что и у **Аутентифицированного пользователя** плюс право удалять **любые** отзывы и комментарии.
- **Администратор** (`admin`) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям. 
- **Суперюзер Django** — обладет правами администратора (`admin`)
### Технологии

<img src="https://img.shields.io/badge/Python-FFD43B?style=for-the-badge&logo=python&logoColor=blue" />
<img src="https://img.shields.io/badge/Django-092E20?style=for-the-badge&logo=django&logoColor=green" />
<img src="https://img.shields.io/badge/django%20rest-ff1709?style=for-the-badge&logo=django&logoColor=white" />

## Примеры
#### Регистрация нового пользователя

Получить код подтверждения на переданный **email**. Права доступа: Доступно без токена.
```
POST /api/v1/auth/signup/
```
 ```
{
  "email": "user@example.com",
  "username": "string"
}
```
Образец ответа
```
{
  "email": "string",
  "username": "string"
}
```

### Получение JWT-токена.
```
 POST /api/v1/auth/token/
 ```
 ```
{
  "username": "string",
  "confirmation_code": "string"
}
```
Образец ответа
```
{
  "token": "string"
}
```
### Получение списка всех категорий.
```
GET /api/v1/categories/
```
Образец ответа
```
{
 "count": 0,
 "next": "string",
 "previous": "string",
 "results": [
 {}
 ]
}
```
### Добавление новой категории.
Создать категорию. Права доступа: Администратор. Поле slug каждой категории должно быть уникальным.
```
POST /api/v1/categories/
```
 Образец для запроса
 ```
{
  "name": "string",
  "slug": "string"
}
```
Образец ответа
```
{
 "name": "string",
 "slug": "string"
}
```
### Удаление категории.
Удалить категорию. Права доступа: Администратор.
```
DELETE api/v1/categories/{slug}/
 ```
### Категории жанров
Получить список всех жанров. Права доступа: Доступно без токена.
```
GET /api/v1/genres/
```
Образец ответа
```
{
 "count": 0,
 "next": "string",
 "previous": "string",
 "results": [
 {}
 ]
}
```
### Добавление жанра.
Добавить жанр. Права доступа: Администратор. Поле slug каждого жанра должно быть уникальным.
```
POST /api/v1/genres/
```
Образец для запроса
 ```
{
  "name": "string",
  "slug": "string"
}
```
Образец ответа
```
{
 "name": "string",
 "slug": "string"
}
```
### Удаление жанра.
Удалить жанр. Права доступа: Администратор.
```
DELETE /api/v1/genres/{slug}/
```
### Категория произведений.
Получить список всех объектов. Права доступа: Доступно без токена.
```
GET api/v1/titles/
```
Образец ответа
```
{
  "count": 0,
  "next": "string",
  "previous": "string",
  "results": [
  {}
  ]
}
```
### Добавление произведения.
При добавлении нового произведения требуется указать уже существующие категорию и жанр.
```
POST /api/v1/titles/
```
Образец для запроса
 ```
{
  "name": "string",
  "year": 0,
  "description": "string",
  "genre": [
  "string"
  ],
  "category": "string"
}
```
Образец ответа
```
{
  "id": 0,
  "name": "string",
  "year": 0,
  "rating": 0,
  "description": "string",
  "genre": [
  {}
  ],
  "category": {
  "name": "string",
  "slug": "string"
  }
}
```
### Получение информации о произведении.
Информация о произведении Права доступа: Доступно без токена
```
GET /api/v1/titles/{titles_id}/
```
Образец ответа
```
{
  "id": 0,
  "name": "string",
  "year": 0,
  "rating": 0,
  "description": "string",
  "genre": [
  {}
  ],
  "category": {
  "name": "string",
  "slug": "string"
  }
}
```
### Частичное обновление информации о произведении.
Обновить информацию о произведении Права доступа: Администратор.
```
PATCH /api/v1/titles/{titles_id}/
```
Образец для запроса
 ```
{
  "name": "string",
  "year": 0,
  "description": "string",
  "genre": [
  "string"
  ],
  "category": "string"
}
```
Образец ответа
```
{
  "id": 0,
  "name": "string",
  "year": 0,
  "rating": 0,
  "description": "string",
  "genre": [
  {}
  ],
  "category": {
  "name": "string",
  "slug": "string"
  }
}
```
### Удаление произведения.
Удалить произведение. Права доступа: Администратор.
```
DELETE /api/v1/titles/{titles_id}/
```
### Категория отзывы.
Получить список всех отзывов. Права доступа: Доступно без токена.
```
GET /api/v1/titles/{title_id}/reviews/
```
Образец ответа
```
{
  "count": 0,
  "next": "string",
  "previous": "string",
- "results": [
  {}
  ]
}
```
### Добавление нового отзыва.
Пользователь может оставить только один отзыв на произведение. Права доступа: Аутентифицированные пользователи.
```
POST /api/v1/titles/{title_id}/reviews/
```
Образец для запроса
 ```
{
  "text": "string",
  "score": 1
}
```
Образец ответа
```
{
  "id": 0,
  "text": "string",
  "author": "string",
  "score": 1,
  "pub_date": "2019-08-24T14:15:22Z"
    }
}
```
### Полуение отзыва по id.
Права доступа: Доступно без токена.
```
GET /api/v1/titles/{title_id}/reviews/{review_id}/
```
Образец ответа
```
{
  "id": 0,
  "text": "string",
  "author": "string",
  "score": 1,
  "pub_date": "2019-08-24T14:15:22Z"
}
```
### Частичное обновление отзыва по id.
Права доступа: Автор отзыва, модератор или администратор.
```
PATCH /api/v1/titles/{title_id}/reviews/{review_id}/
```
Образец для запроса
 ```
{
  "text": "string",
  "score": 1
}
```
Образец ответа
```
{
  "id": 0,
  "text": "string",
  "author": "string",
  "score": 1,
  "pub_date": "2019-08-24T14:15:22Z"
}
```
### Удаление отзыва по id.
Права доступа: Автор отзыва, модератор или администратор.
```
DELETE /api/v1/titles/{title_id}/reviews/{review_id}/
```
